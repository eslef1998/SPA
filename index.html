<!DOCTYPE html> <!-- Indica que este archivo es un documento HTML5 -->
<html lang="es"> <!-- El idioma principal de la página es español -->
<head>
  <!-- Configuración básica de la página -->
  <meta charset="UTF-8" /> <!-- Codificación de caracteres UTF-8 -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <!-- Hace que la página sea responsive -->
  <title>CRUD Operations - Students List</title> <!-- Título que aparece en la pestaña del navegador -->
  <!-- Fuentes y estilos externos -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet"> <!-- Fuente Inter de Google Fonts -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/> <!-- Iconos de Font Awesome -->
  <link rel="stylesheet" href="style.css"> <!-- Archivo de estilos personalizado -->

  <!-- Verifica si hay sesión iniciada antes de mostrar la app -->
  <script type="module">
    import { getSession } from './auth.js'; // Importa la función para obtener la sesión
    // Si no hay sesión, redirige al login
    if (!getSession()) {
      window.location.href = './login.html'; // Redirige al login si no hay usuario logueado
    }
  </script>
</head>
<body>
  <!-- Menú lateral (sidebar) -->
  <aside>
    <div>
      <!-- Logo de la app -->
      <div class="logo">CRUD OPERATIONS</div> <!-- Muestra el nombre/logo de la app -->
      <!-- Perfil del usuario (imagen, nombre y rol) -->
      <div class="profile">
        <img src="./e926f691a012af425ff39d25b0ca54f0223c82cf.jpg" alt="Profile" /> <!-- Imagen de perfil -->
        <div class="name">Random guy</div> <!-- Nombre del usuario -->
        <div class="role">Admin</div> <!-- Rol del usuario -->
      </div>
      <!-- Menú de navegación -->
      <nav>
        <ul>
          <li><i class="fas fa-home"></i><span>Home</span></li> <!-- Opción Home -->
          <li><i class="fas fa-bookmark"></i><span>Course</span></li> <!-- Opción Course -->
          <li class="active"><i class="fas fa-graduation-cap"></i><span>Users</span></li> <!-- Opción Users (activa) -->
          <li><i class="fas fa-dollar-sign"></i><span>Payment</span></li> <!-- Opción Payment -->
          <li><i class="fas fa-chart-bar"></i><span>Report</span></li> <!-- Opción Report -->
          <li><i class="fas fa-cog"></i><span>Settings</span></li> <!-- Opción Settings -->
        </ul>
      </nav>
    </div>
    <!-- Botón para cerrar sesión -->
    <button id="logoutBtn">Logout</button> <!-- Botón para cerrar sesión -->
  </aside>

  <!-- Contenido principal de la página -->
  <main>
    <header>
      <!-- Título de la sección -->
      <h2>Students List</h2> <!-- Título principal de la sección de estudiantes -->
      <!-- Botón para abrir el modal y agregar estudiante -->
      <button class="btn">ADD NEW STUDENT</button> <!-- Botón para abrir el modal de agregar estudiante -->
    </header>
    <div class="students-list">
      <!-- Tabla donde se mostrarán los estudiantes -->
      <table>
        <thead>
          <tr>
            <th></th> <!-- Columna para el índice o acciones -->
            <th>Name</th> <!-- Columna para el nombre -->
            <th>Email</th> <!-- Columna para el email -->
            <th>Phone</th> <!-- Columna para el teléfono -->
            <th>Enroll Number</th> <!-- Columna para el número de matrícula -->
            <th>Date of admission</th> <!-- Columna para la fecha de admisión -->
            <th>Actions</th> <!-- Columna para los botones de acción (editar/eliminar) -->
          </tr>
        </thead>
        <tbody id="studentTableBody">
          <!-- Aquí el JS insertará las filas de estudiantes -->
        </tbody>
      </table>
    </div>

    <!-- Modal flotante para agregar un nuevo estudiante -->
    <div id="addStudentForm" class="modal">
      <div class="modal-content">
        <!-- Botón para cerrar el modal (la X) -->
        <span class="close-btn">&times;</span> <!-- Botón X para cerrar el modal -->
        <h2>Add New Student</h2> <!-- Título del modal -->
        <!-- Formulario para ingresar los datos del estudiante -->
        <form id="studentForm" class="student-form">
          <input type="text" id="studentName" placeholder="Name" required /> <!-- Campo para el nombre -->
          <input type="email" id="studentEmail" placeholder="Email" required /> <!-- Campo para el email -->
          <input type="tel" id="studentPhone" placeholder="Phone" required /> <!-- Campo para el teléfono -->
          <input type="text" id="studentEnroll" placeholder="Enroll Number" required /> <!-- Campo para el número de matrícula -->
          <input type="date" id="studentDate" placeholder="Date of admission" required /> <!-- Campo para la fecha de admisión -->
          <!-- Botón para agregar el estudiante -->
          <button type="submit" class="btn">Add Student</button> <!-- Botón para guardar el estudiante -->
          <!-- Botón para cancelar y cerrar el modal -->
          <button type="button" class="cancel-btn">Cancelar operación</button> <!-- Botón para cancelar y cerrar el modal -->
        </form>
      </div>
    </div>
  </main>

  <!-- Lógica principal de la app (JS) -->
  <script type="module" src="./script.js"></script> <!-- Archivo JS principal para la lógica del CRUD -->

  <!-- Lógica para el botón de logout -->
  <script type="module">
    import { clearSession } from './auth.js'; // Importa la función para limpiar la sesión
    // Cuando se hace clic en logout, borra la sesión y redirige al login
    const logoutBtn = document.getElementById('logoutBtn'); // Selecciona el botón de logout
    logoutBtn?.addEventListener('click', () => {
      clearSession(); // Limpia la sesión
      window.location.href = './login.html'; // Redirige al login
    });
  </script>
</body>
</html>
